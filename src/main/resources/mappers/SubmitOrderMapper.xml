<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.diamondboss.order.repository.SubmitOrderMapper" >

	<!-- 根据宠物编号查询预约日期  -->
	<select id="queryOrderByUser"
		parameterType="java.util.Map"
		resultType="java.lang.String">
		SELECT
		    order_time
		FROM
		    parter_order
		WHERE
		    pet_id = #{petId}
		    AND order_time &gt;= #{today}
		    AND effective = '1'
	</select>

	<!-- 插入订单  -->
	<insert id="insertParterOrder"
		parameterType="java.util.Map">
		INSERT
		INTO
		    parter_order
		    (
		        community_id,
		        parter_id,
		        pet_id,
		        order_time,
		        effective,
		    )
		    VALUES
		    (
		        #{communityId},
		        #{parterId},
		        #{petId},
		        #{orderTime},
		        '1'
		    )
	</insert>

	<!-- 查询订单  -->
	<select id="queryParterOrder"
		resultType="java.lang.Integer">
		SELECT
		    COUNT(1)
		FROM
		    parter_order
		WHERE
		    parter_id =  #{parterId}
		AND order_time = #{orderTime}
		AND effective = '1'
	</select>

	<!-- 更新订单  -->
	<update id="updateParterOrder">
		UPDATE
		    parter_order
		SET
		    effective = #{effective} 
		WHERE
		   pet_id = #{petId}
		   AND order_time = #{orderTime}
	</update>


</mapper>